<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VISITANTES EXTERIOR | Jemmsa Furniture</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white">
  <!-- Header -->
  <div id="header-container"></div>

  <!-- Navbar -->
  <div id="navbar-container"></div>

  <!-- Main Content -->
  <main class="lg:ml-64 pt-20 lg:pt-0 px-4 sm:px-6 lg:px-8 py-8">
    <!-- Breadcrumb -->
    <nav class="mb-6">
      <ol class="flex items-center space-x-2 text-sm text-gray-600">
        <li>
          <a href="/" class="text-blue-600 hover:text-blue-800">Home</a>
        </li>
        <li class="text-gray-400">/</li>
        <li class="text-gray-700 font-semibold">VISITANTES EXTERIOR</li>
      </ol>
    </nav>

    <!-- Category Header -->
    <div class="mb-12">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-2">VISITANTES EXTERIOR</h1>
      <p class="text-lg text-gray-600">Explora nuestra colección de sillas para visitantes diseñadas para espacios exteriores</p>
    </div>

    <!-- Search Bar -->
    <div class="mb-8">
      <input 
        type="text" 
        id="search-input" 
        placeholder="Buscar familia..."
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
    </div>

    <!-- Families Grid -->
    <div id="families-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-12">
      <!-- Families will be loaded here by JavaScript -->
    </div>
  </main>

  <!-- Footer -->
  <div id="footer-container" class="lg:ml-64"></div>

  <!-- Load shared components and script -->
  <script src="../../public/js/site.js"></script>
  <script>
    // Load families from data.json
    async function loadFamilies() {
      try {
        const response = await fetch('../data.json');
        const data = await response.json();
        const families = data.categorias['visitantes-exterior'].families || [];
        const container = document.getElementById('families-container');
        const searchInput = document.getElementById('search-input');

        function renderFamilies(filteredFamilies) {
          container.innerHTML = filteredFamilies.map(family => `
            <a href="${family.url}" class="group block bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300">
              <div class="bg-gradient-to-br from-blue-50 to-gray-50 aspect-square flex items-center justify-center">
                <span class="text-4xl font-bold text-gray-300 group-hover:text-blue-400 transition-colors">${family.name.charAt(0)}</span>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors">${family.name}</h3>
                <p class="text-sm text-gray-500 mt-1">${family.type === 'familia' ? 'Familia' : 'Modelo'}</p>
              </div>
            </a>
          `).join('');
        }

        // Initial render
        renderFamilies(families);

        // Search functionality
        searchInput.addEventListener('input', (e) => {
          const searchTerm = e.target.value.toLowerCase();
          const filtered = families.filter(family => 
            family.name.toLowerCase().includes(searchTerm)
          );
          renderFamilies(filtered);
        });
      } catch (error) {
        console.error('Error loading families:', error);
        document.getElementById('families-container').innerHTML = '<p class="text-red-500">Error al cargar familias</p>';
      }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
      initSite();
      loadFamilies();
    });
  </script>
</body>
</html>
